(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{412:function(t,a,e){"use strict";e.r(a);var s=e(15),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("你好呀，我的老朋友！我是老寇，欢迎来到老寇IoT云平台！")]),t._v(" "),a("p",[t._v("本文档详细介绍了 "),a("code",[t._v("OAuth2AuthorizationServerProperties")]),t._v(" 配置类的所有配置项，包括说明、类型、默认值和配置示例。")]),t._v(" "),a("h2",{attrs:{id:"配置前缀"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置前缀"}},[t._v("#")]),t._v(" 配置前缀")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 所有配置项都在此前缀下")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_1-基础配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基础配置"}},[t._v("#")]),t._v(" 1. 基础配置")]),t._v(" "),a("h3",{attrs:{id:"配置项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置项说明"}},[t._v("#")]),t._v(" 配置项说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("enabled")])]),t._v(" "),a("td",[a("code",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("是否启用授权服务器")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("issuer")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("授权服务器的 Issuer 标识符 URL")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("multiple-issuers-allowed")])]),t._v(" "),a("td",[a("code",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("是否允许每个主机有多个 Issuer（用于多租户配置）")])])])]),t._v(" "),a("h3",{attrs:{id:"配置示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置示例"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("issuer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//auth.example.com\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("multiple-issuers-allowed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_2-端点配置-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-端点配置-endpoint"}},[t._v("#")]),t._v(" 2. 端点配置 (Endpoint)")]),t._v(" "),a("h3",{attrs:{id:"oauth-2-0-端点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oauth-2-0-端点"}},[t._v("#")]),t._v(" OAuth 2.0 端点")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("endpoint.authorization-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/authorize")])]),t._v(" "),a("td",[t._v("OAuth 2.0 授权端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.device-authorization-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/device_authorization")])]),t._v(" "),a("td",[t._v("设备授权端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.device-verification-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/device_verification")])]),t._v(" "),a("td",[t._v("设备验证端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.token-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/token")])]),t._v(" "),a("td",[t._v("Token 端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.jwk-set-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/jwks")])]),t._v(" "),a("td",[t._v("JWK Set 端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.token-revocation-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/revoke")])]),t._v(" "),a("td",[t._v("Token 撤销端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.token-introspection-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/introspect")])]),t._v(" "),a("td",[t._v("Token 自省端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.pushed-authorization-request-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oauth2/par")])]),t._v(" "),a("td",[t._v("PAR（推送授权请求）端点")])])])]),t._v(" "),a("h3",{attrs:{id:"openid-connect-1-0-端点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openid-connect-1-0-端点"}},[t._v("#")]),t._v(" OpenID Connect 1.0 端点")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("endpoint.oidc.logout-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oidc/connect/logout")])]),t._v(" "),a("td",[t._v("OIDC 登出端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.oidc.client-registration-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oidc/connect/register")])]),t._v(" "),a("td",[t._v("OIDC 客户端注册端点")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("endpoint.oidc.user-info-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("/v1/oidc/userinfo")])]),t._v(" "),a("td",[t._v("OIDC 用户信息端点")])])])]),t._v(" "),a("h3",{attrs:{id:"配置示例-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置示例-2"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/authorize\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-authorization-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/device_authorization\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-verification-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/device_verification\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/token\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jwk-set-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/jwks\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-revocation-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/revoke\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-introspection-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/introspect\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pushed-authorization-request-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oauth2/par\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oidc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logout-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oidc/connect/logout\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-registration-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oidc/connect/register\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user-info-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /v1/oidc/userinfo\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-客户端配置-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-客户端配置-client"}},[t._v("#")]),t._v(" 3. 客户端配置 (Client)")]),t._v(" "),a("p",[t._v("客户端配置使用 Map 结构，键为客户端标识名（如 "),a("code",[t._v("default")]),t._v("、"),a("code",[t._v("pkce")]),t._v("），值为客户端配置对象。")]),t._v(" "),a("h3",{attrs:{id:"_3-1-客户端基础配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-客户端基础配置"}},[t._v("#")]),t._v(" 3.1 客户端基础配置")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("require-proof-key")])]),t._v(" "),a("td",[a("code",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("是否要求 PKCE（Proof Key for Code Exchange）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("require-authorization-consent")])]),t._v(" "),a("td",[a("code",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("是否要求用户授权同意")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("jwk-set-uri")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("客户端的 JWK Set URL")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token-endpoint-authentication-signing-algorithm")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("Token 端点认证签名算法（用于 "),a("code",[t._v("private_key_jwt")]),t._v(" 和 "),a("code",[t._v("client_secret_jwt")]),t._v("）")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-客户端注册信息-registration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-客户端注册信息-registration"}},[t._v("#")]),t._v(" 3.2 客户端注册信息 (Registration)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("registration.client-id")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("客户端 ID")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.client-secret")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("客户端密钥（公开客户端可为空）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.client-name")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("null")])]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("客户端名称")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.client-authentication-methods")])]),t._v(" "),a("td",[a("code",[t._v("Set<String>")])]),t._v(" "),a("td",[a("code",[t._v("[]")])]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("客户端认证方式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.authorization-grant-types")])]),t._v(" "),a("td",[a("code",[t._v("Set<String>")])]),t._v(" "),a("td",[a("code",[t._v("[]")])]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("授权类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.redirect-uris")])]),t._v(" "),a("td",[a("code",[t._v("Set<String>")])]),t._v(" "),a("td",[a("code",[t._v("[]")])]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("重定向 URI（授权码模式必需）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.post-logout-redirect-uris")])]),t._v(" "),a("td",[a("code",[t._v("Set<String>")])]),t._v(" "),a("td",[a("code",[t._v("[]")])]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("登出后重定向 URI")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registration.scopes")])]),t._v(" "),a("td",[a("code",[t._v("Set<String>")])]),t._v(" "),a("td",[a("code",[t._v("[]")])]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("作用域")])])])]),t._v(" "),a("h4",{attrs:{id:"客户端认证方式可选值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端认证方式可选值"}},[t._v("#")]),t._v(" 客户端认证方式可选值")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("client_secret_basic")])]),t._v(" "),a("td",[t._v("HTTP Basic 认证（推荐）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("client_secret_post")])]),t._v(" "),a("td",[t._v("请求体中传递密钥")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("client_secret_jwt")])]),t._v(" "),a("td",[t._v("使用 JWT 进行认证")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("private_key_jwt")])]),t._v(" "),a("td",[t._v("使用私钥签名的 JWT")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("none")])]),t._v(" "),a("td",[t._v("公开客户端（无认证）")])])])]),t._v(" "),a("h4",{attrs:{id:"授权类型可选值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授权类型可选值"}},[t._v("#")]),t._v(" 授权类型可选值")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("authorization_code")])]),t._v(" "),a("td",[t._v("授权码模式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("refresh_token")])]),t._v(" "),a("td",[t._v("刷新令牌")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("client_credentials")])]),t._v(" "),a("td",[t._v("客户端凭证模式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("username_password")])]),t._v(" "),a("td",[t._v("用户名密码模式（自定义扩展）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("mail")])]),t._v(" "),a("td",[t._v("邮箱模式（自定义扩展）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("mobile")])]),t._v(" "),a("td",[t._v("手机号模式（自定义扩展）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("test")])]),t._v(" "),a("td",[t._v("测试模式（自定义扩展）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("urn:ietf:params:oauth:grant-type:device_code")])]),t._v(" "),a("td",[t._v("设备授权码模式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("urn:ietf:params:oauth:grant-type:jwt-bearer")])]),t._v(" "),a("td",[t._v("JWT Bearer 模式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("urn:ietf:params:oauth:grant-type:token-exchange")])]),t._v(" "),a("td",[t._v("令牌交换模式")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-3-token-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-token-配置"}},[t._v("#")]),t._v(" 3.3 Token 配置")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置项")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("token.authorization-code-time-to-live")])]),t._v(" "),a("td",[a("code",[t._v("Duration")])]),t._v(" "),a("td",[a("code",[t._v("5m")])]),t._v(" "),a("td",[t._v("授权码有效期")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.access-token-time-to-live")])]),t._v(" "),a("td",[a("code",[t._v("Duration")])]),t._v(" "),a("td",[a("code",[t._v("5m")])]),t._v(" "),a("td",[t._v("访问令牌有效期")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.access-token-format")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("self-contained")])]),t._v(" "),a("td",[t._v("访问令牌格式（"),a("code",[t._v("self-contained")]),t._v(" 或 "),a("code",[t._v("reference")]),t._v("）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.device-code-time-to-live")])]),t._v(" "),a("td",[a("code",[t._v("Duration")])]),t._v(" "),a("td",[a("code",[t._v("5m")])]),t._v(" "),a("td",[t._v("设备码有效期")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.refresh-token-time-to-live")])]),t._v(" "),a("td",[a("code",[t._v("Duration")])]),t._v(" "),a("td",[a("code",[t._v("60m")])]),t._v(" "),a("td",[t._v("刷新令牌有效期")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.reuse-refresh-tokens")])]),t._v(" "),a("td",[a("code",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("是否重用刷新令牌")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("token.id-token-signature-algorithm")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[a("code",[t._v("RS256")])]),t._v(" "),a("td",[t._v("ID Token 签名算法")])])])]),t._v(" "),a("h4",{attrs:{id:"duration-格式说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#duration-格式说明"}},[t._v("#")]),t._v(" Duration 格式说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("格式")]),t._v(" "),a("th",[t._v("示例")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("XS")])]),t._v(" "),a("td",[a("code",[t._v("30s")])]),t._v(" "),a("td",[t._v("秒")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("XM")])]),t._v(" "),a("td",[a("code",[t._v("5m")])]),t._v(" "),a("td",[t._v("分钟")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("XH")])]),t._v(" "),a("td",[a("code",[t._v("1h")])]),t._v(" "),a("td",[t._v("小时")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("XD")])]),t._v(" "),a("td",[a("code",[t._v("7d")])]),t._v(" "),a("td",[t._v("天")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_4-完整配置示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-完整配置示例"}},[t._v("#")]),t._v(" 4. 完整配置示例")]),t._v(" "),a("h3",{attrs:{id:"示例-1-默认客户端-多种认证方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-1-默认客户端-多种认证方式"}},[t._v("#")]),t._v(" 示例 1：默认客户端（多种认证方式）")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("multiple-issuers-allowed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-code-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("access-token-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("refresh-token-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1h\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-code-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("access-token-format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("contained\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("reuse-refresh-tokens")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id-token-signature-algorithm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" RS256\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Base64编码: OTVUeFNzVFBGQTN0RjEyVEJTTW1VVkswZGE6RnBId0lmdzR3WTkyZE8=")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 95TxSsTPFA3tF12TBSMmUVK0da\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OAuth2.1认证【用户名密码/邮箱/手机号/测试/设备授权码/客户端】\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 原值: FpHwIfw4wY92dO（使用 BCrypt 加密）")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{bcrypt}$2a$10$BDcxgmL3WYk7G.QEDTqlBeSudNlV3KUU/V6iC.hKlAbGAC.jbX2fO"')]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-authentication-methods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" client_secret_basic\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-grant-types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" username_password\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mail\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mobile\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" test\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" refresh_token\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" client_credentials\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" urn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("ietf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("oauth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("grant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("device_code\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" urn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("ietf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("oauth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("grant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("jwt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bearer\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" urn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("ietf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("oauth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("grant"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("exchange\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scopes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" read\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" write\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-authorization-consent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-proof-key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),a("h3",{attrs:{id:"示例-2-pkce-客户端-授权码模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-2-pkce-客户端-授权码模式"}},[t._v("#")]),t._v(" 示例 2：PKCE 客户端（授权码模式）")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pkce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-code-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("access-token-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("refresh-token-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1h\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-code-time-to-live")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Base64编码: ZWI3RGVkNWJiRmJkNzg5NmY4YTJjZmREYzk6RHBBa1BmejRlVzE4ZDI=")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eb7Ded5bbFbd7896f8a2cfdDc9\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" OAuth2.1认证【授权码】\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 原值: DpAkPfz4eW18d2（使用 BCrypt 加密）")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{bcrypt}$2a$10$i2Y4II7czKcLqwAxWLgHqeJaIczss4wHArWmthzn3QoLhpCZtdN0O"')]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-authentication-methods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" none\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-grant-types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" authorization_code\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" refresh_token\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scopes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" read\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" write\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redirect-uris")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8001")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//laokou.org.cn\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("post-logout-redirect-uris")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8001")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//laokou.org.cn\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-authorization-consent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-proof-key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])]),a("h3",{attrs:{id:"示例-3-自定义端点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-3-自定义端点"}},[t._v("#")]),t._v(" 示例 3：自定义端点")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/authorize\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/token\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jwk-set-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/jwks\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-revocation-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/revoke\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token-introspection-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/introspect\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-authorization-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/device_authorization\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("device-verification-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/device_verification\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pushed-authorization-request-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oauth2/par\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oidc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logout-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oidc/logout\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-registration-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oidc/register\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user-info-uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/oidc/userinfo\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-配置校验规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置校验规则"}},[t._v("#")]),t._v(" 5. 配置校验规则")]),t._v(" "),a("p",[t._v("启动时会自动校验以下规则:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("规则")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("client-id")]),t._v(" 不能为空")]),t._v(" "),a("td",[t._v("每个客户端必须设置唯一的客户端 ID")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("client-authentication-methods")]),t._v(" 不能为空")]),t._v(" "),a("td",[t._v("必须至少设置一种认证方式")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("authorization-grant-types")]),t._v(" 不能为空")]),t._v(" "),a("td",[t._v("必须至少设置一种授权类型")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_6-安全建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-安全建议"}},[t._v("#")]),t._v(" 6. 安全建议")]),t._v(" "),a("blockquote",[a("p",[t._v("[!IMPORTANT]\n以下是一些重要的安全建议，请在生产环境中务必遵守。")])]),t._v(" "),a("h3",{attrs:{id:"密钥加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密钥加密"}},[t._v("#")]),t._v(" 密钥加密")]),t._v(" "),a("p",[t._v("客户端密钥建议使用 BCrypt 加密存储：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 格式: {加密算法}加密后的值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client-secret")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{bcrypt}$2a$10$BDcxgmL3WYk7G.QEDTqlBeSudNlV3KUU/V6iC.hKlAbGAC.jbX2fO"')]),t._v("\n")])])]),a("h3",{attrs:{id:"token-有效期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token-有效期"}},[t._v("#")]),t._v(" Token 有效期")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("场景")]),t._v(" "),a("th",[t._v("建议值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("访问令牌（access-token）")]),t._v(" "),a("td",[t._v("5-15 分钟")])]),t._v(" "),a("tr",[a("td",[t._v("刷新令牌（refresh-token）")]),t._v(" "),a("td",[t._v("1-24 小时")])]),t._v(" "),a("tr",[a("td",[t._v("授权码（authorization-code）")]),t._v(" "),a("td",[t._v("5-10 分钟")])]),t._v(" "),a("tr",[a("td",[t._v("设备码（device-code）")]),t._v(" "),a("td",[t._v("5-10 分钟")])])])]),t._v(" "),a("h3",{attrs:{id:"pkce-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pkce-使用"}},[t._v("#")]),t._v(" PKCE 使用")]),t._v(" "),a("p",[t._v("对于公开客户端（如 SPA、移动应用），强烈建议启用 PKCE：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization-server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pkce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-authorization-consent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("require-proof-key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_7-相关链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-相关链接"}},[t._v("#")]),t._v(" 7. 相关链接")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.spring.io/spring-authorization-server/reference/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Authorization Server 官方文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://oauth.net/2.1/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OAuth 2.1 规范"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tools.ietf.org/html/rfc7636",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC 7636 - PKCE"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://openid.net/connect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenID Connect 1.0"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("我是老寇，我们下次再见啦！")])])}),[],!1,null,null,null);a.default=n.exports}}]);