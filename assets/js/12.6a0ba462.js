(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{340:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("你好呀，我的老朋友！我是老寇，欢迎来到老寇云平台！"),a("br"),s._v("\n跟我一起安装Elasticsearch。")]),s._v(" "),a("h2",{attrs:{id:"下载elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载elasticsearch"}},[s._v("#")]),s._v(" 下载elasticsearch")]),s._v(" "),a("p",[a("a",{attrs:{target:"_blank",href:"https://www.elastic.co/cn/downloads/past-releases/elasticsearch-8-6-2"}},[s._v("elasticsearch官网地址")]),a("br"),s._v(" "),a("img",{attrs:{src:"/img/8/img.png"}})]),s._v(" "),a("h2",{attrs:{id:"下载分词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载分词"}},[s._v("#")]),s._v(" 下载分词")]),s._v(" "),a("p",[a("a",{attrs:{target:"_blank",href:"https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v8.6.2"}},[s._v("elasticsearch-analysis-ik地址")]),a("br"),s._v(" "),a("img",{attrs:{src:"/img/8/img_1.png"}})]),s._v(" "),a("p",[a("a",{attrs:{target:"_blank",href:"https://github.com/medcl/elasticsearch-analysis-pinyin/releases/tag/v8.6.2"}},[s._v("elasticsearch-analysis-pinyin地址")]),a("br"),s._v(" "),a("img",{attrs:{src:"/img/8/img_2.png"}})]),s._v(" "),a("h2",{attrs:{id:"安装软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装软件"}},[s._v("#")]),s._v(" 安装软件")]),s._v(" "),a("h6",{attrs:{id:"解压压缩包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解压压缩包"}},[s._v("#")]),s._v(" 解压压缩包")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" elasticsearch-8.6.2-linux-x86_64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /opt/pinyin elasticsearch-analysis-pinyin-8.6.2.zip\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /opt/ik elasticsearch-analysis-ik-8.6.2.zip\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-8.6.2 /usr/local/elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" pinyin /usr/local/elasticsearch/plugins/pinyin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" ik /usr/local/elasticsearch/plugins/ik\n")])])]),a("h6",{attrs:{id:"新增用户名和设置新密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增用户名和设置新密码"}},[s._v("#")]),s._v(" 新增用户名和设置新密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" elasticsearch\n")])])]),a("h6",{attrs:{id:"创建data和logs文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建data和logs文件夹"}},[s._v("#")]),s._v(" 创建data和logs文件夹")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /usr/local/elasticsearch/home/data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /usr/local/elasticsearch/home/logs\n")])])]),a("h6",{attrs:{id:"授予权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授予权限"}},[s._v("#")]),s._v(" 授予权限")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /usr/local/elasticsearch\n")])])]),a("h6",{attrs:{id:"设置elasticsearch-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置elasticsearch-yml"}},[s._v("#")]),s._v(" 设置elasticsearch.yml")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" elasticsearch.yml\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加")]),s._v("\nhttp.cors.enabled: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nhttp.cors.allow-origin: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\nnetwork.host: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\ncluster.name: laokou-elasticsearch "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可自定义")]),s._v("\nnode.name: node-elasticsearch "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可自定义")]),s._v("\nhttp.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\ncluster.initial_master_nodes: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-elasticsearch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里就是node.name")]),s._v("\npath.data: /usr/local/elasticsearch/home/data "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据目录位置")]),s._v("\npath.logs: /usr/local/elasticsearch/home/logs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志目录位置")]),s._v("\n")])])]),a("h6",{attrs:{id:"设置堆内存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置堆内存"}},[s._v("#")]),s._v(" 设置堆内存")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" jvm.options\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xms512m")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xmx512m")]),s._v("\n")])])]),a("h6",{attrs:{id:"修改jdk位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改jdk位置"}},[s._v("#")]),s._v(" 修改jdk位置")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" elasticsearch-env\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("\n")])])]),a("h6",{attrs:{id:"开启ssl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启ssl"}},[s._v("#")]),s._v(" 开启ssl")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ES的根目录生成CA证书")]),s._v("\n./elasticsearch-certutil ca\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据生成的证书，生成p12密钥")]),s._v("\n./elasticsearch-certutil cert "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--ca")]),s._v(" elastic-stack-ca.p12\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/elasticsearch/config/certs\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" elastic-stack-ca.p12 config/certs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" elastic-certificates.p12 config/certs\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" elasticsearch.yml\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 授予权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" elasticsearch: /usr/local/elasticsearch/config/certs/elastic-certificates.p12\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加")]),s._v("\nxpack.security.enabled: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.license.self_generated.type: basic\nxpack.security.transport.ssl.enabled: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.security.transport.ssl.verification_mode: certificate\nxpack.security.transport.ssl.keystore.path: certs/elastic-certificates.p12\nxpack.security.transport.ssl.truststore.path: certs/elastic-certificates.p12\n")])])]),a("h6",{attrs:{id:"报错处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#报错处理"}},[s._v("#")]),s._v(" 报错处理")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysctl.conf\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("vm.max_map_count "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("655360")]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/security/limits.conf\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("elasticsearch soft nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nelasticsearch hard nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65537")]),s._v("\n")])])]),a("h6",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" elasticsearch\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n./elasticsearch\n")])])]),a("h6",{attrs:{id:"设置密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置密码"}},[s._v("#")]),s._v(" 设置密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" elasticsearch.yml\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加")]),s._v("\nhttp.cors.allow-headers: Authorization\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启elasticsearch")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n./elasticsearch-setup-passwords interactive\n")])])]),a("h6",{attrs:{id:"后台运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后台运行"}},[s._v("#")]),s._v(" 后台运行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/elasticsearch/bin/elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n./elasticsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])])]),a("p",[s._v("我是老寇，我们下次再见啦！")])])}),[],!1,null,null,null);a.default=r.exports}}]);